---
title: Кооперативный режим
sidebar_label: Кооперативный режим
sidebar_position: 3
---
### Создание совместной игры
**Отправка:**
```json
{
  "type": "CREATE_MULTI",
  "playerId": "string",
  "lang": "ru",
  "name": "string",
  "image": "base64"
}
```

**Ответ:**
```json
{
  "type": "ROOM_CREATED",
  "wordLength": 8,
  "gameId": "AbCdEf123456"
}
```

---

### Подключение к комнате по коду
**Отправка:**
```json
{
  "type": "JOIN_MULTI",
  "playerId": "string",
  "gameId": "string",
  "name": "string",
  "image": "base64"
}
```

**Ответы:**
- Если комната не найдена:
```json
{
  "type": "ERROR",
  "msg": "Комната не найдена"
}
```
- Если успешно, отправляется всем игрокам:
```json
{
  "type": "PLAYER_JOINED",
  "attemptsLeft": 7,
  "wordLength": 8,
  "players": [
    { "name": "Иван", "image": "base64" },
    { "name": "Олег", "image": "base64" }
  ],
  "gameId": "AbCdEf123456",
  "guessed": ["А", "Б"]
}
```

---

### Как делать ход

**Отправка:**
```json
{
  "type": "MOVE",
  "gameId": "string",
  "letter": "string"
}
```

**Ответ:**
```json
{
  "attemptsLeft": 7,
  "duplicate": false,
  "type": "STATE_UPDATE",
  "maskedWord": "_ _ _ _ _ _ _ _"
}
```
> Отправляется обоим игрокам

---

### Выхода из игры
**Отправка:**
```json
{
  "type": "LEAVE_GAME",
  "gameId": "string"
}
```

**Ответ всем кроме инициатора: (в случае если 3 и более игроков в комнате)**
```json
{
  "type": "PLAYER_LEFT",
  "name": "Иван"
}
```

**Ответ оставшемуся игроку:**
```json
{
  "type": "GAME_CANCELED",
  "word": "город"
}
```

### Результат окончания игры
> Приходит при выходе игрока или после MOVE если требуется

**Ответ для совместной игры:**
```json
{
  "type": "GAME_OVER_COOP",
  "result": "WIN",
  "word": "город",
  "attemptsLeft": 8,
  "wordLength": 6,
  "players": "{ name: string, image: base64 }",
  "gameId": "AbCdEf123456",
  "guessed": []
}
```
> Сделано для продолжения игры, не удаляя комнату

---

## Пример последовательности для начала игры

1. Отправляете `CREATE_MULTI` → получаете `ROOM_CREATED` с `gameId`.
2. Второй игрок отправляет `JOIN_MULTI` с тем же `gameId`.
3. Сервер отправляет обоим: `PLAYER_JOINED`
4. Оба начинают обмениваться командами `MOVE` и получать `STATE_UPDATE`.

---

## Пример последовательности при выходе из игры

1. Отправляете `LEAVE_GAME`.
2. Сервер вернет другим игрокам: `PLAYER_LEFT`, если игроков осталось один: `GAME_CANCELED`
