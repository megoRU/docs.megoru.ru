---
title: Обзор
sidebar_label: Обзор
sidebar_position: 1
---
:::info Base API URL
`https://hangman.megoru.ru/ws`
:::

## Описание
Взаимодействие с сервером происходит через **WebSocket**. Все сообщения передаются в формате JSON.

### Начало работы с WebSocket

```json
{
  "type": "HELLO",
  "playerId": "uuid"
}
```

### Если ваше приложение потеряло соединение отправить:

**Отправка:**
```json
{
  "type": "RECONNECT",
  "playerId": "uuid",
  "gameId": "последняя игра"
}
```

**Ответ:**
```json
{
  "type": "RESTORED",
  "gameId": "EnVoLyvjQAaRXwVXbH",
  "wordLength": 6,
  "maskedWord": "_ a _ _ _ _",
  "attemptsLeft": 4,
  "guessed": ["А", "Б"],
  "players": [
    { "name": "Иван", "image": "base64" },
    { "name": "Олег", "image": "base64" }
  ]
}
```

**Ответ в случае если игры больше нет:**
```json
{
  "type": "ERROR",
  "msg": "Игра завершена или недоступна"
}
```

## Типы сообщений
| Поле           | Тип      | Описание                                                                                                                                                                   |
|----------------|----------|----------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| `type`         | string   | Тип события: `FIND_GAME`, `MOVE`, `STATE_UPDATE` и т. д.                                                                                                                   |
| `gameId`       | string   | Идентификатор игры. Возвращается сервером при `FIND_GAME` / `CREATE_MULTI`. При переподключении клиент должен передать `gameId`, чтобы сервер восстановил состояние игры.  |
| `playerId`     | string   | Уникальный идентификатор игрока. Клиент обязан его сгенерировать один раз (например, UUID) и сохранять локально. Используется для идентификации при `HELLO` и `RECONNECT`. |
| `name`         | string   | Никнейм                                                                                                                                                                    |
| `image`        | string   | Изображение в `Base64`                                                                                                                                                     |
| `wordLength`   | number   | Длина загаданного слова                                                                                                                                                    |
| `maskedWord`   | string   | Слово с закрытыми буквами                                                                                                                                                  |
| `letter`       | string   | Буква для хода                                                                                                                                                             |
| `guessed`      | string[] | Угаданные буквы                                                                                                                                                            |
| `result`       | string   | Результат игры: `WIN` / `LOSE`                                                                                                                                             |
| `attemptsLeft` | number   | Сколько остаток попыток                                                                                                                                                    |
| `duplicate`    | boolean  | Использована ли уже буква                                                                                                                                                  |
| `lang`         | string   | Язык слова: `ru` / `en`                                                                                                                                                    |
| `players`      | Object[] | Список игроков `{ name: string, image: Base64 }`                                                                                                                           |
| `msg`          | string   | Сообщение об ошибке                                                                                                                                                        |